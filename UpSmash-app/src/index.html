<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div id ="logo">
      <img id="upSmashLogo" src="../../UpSmash/static/images/UpSmash-02-purple.jpg" alt="UpSmash Logo">
      <div id = "content">
        <label>Specify Slippi Files (.slp) path, can typically be found at C:Users/'username'/Documents/Slippi/: </label>
          <input type="file" id="slpFolder" name="fileList" webkitdirectory multiple/>
          <ul id="listing"></ul>
      </div>
    </div>
    <script>
      const electron = require('electron');
      const { ipcRenderer } = electron;
      document.getElementById("slpFolder").addEventListener("change", (event) => {
      let output = document.getElementById("listing");
      let item = document.createElement("li");
      let parent = event.target.files[0].path;
      let sub = parent.split('\\');
      let removed = sub.pop();
      let final = '';
      for (const subs of sub) {
        if (final === '') {
          final = final + subs
        } else{
          final = final + '/' + subs;
        }
      };
      item.textContent = final;
      output.appendChild(item);
      let fileList = new Array();
      for (const file of event.target.files) {
        fileList.push(file.path);
        };
      if (fileList.length ==  event.target.files.length) {
        ipcRenderer.send("fileList", fileList)
        ipcRenderer.send("parentPath", final)
      };
      }, false);
    </script>
  </body>
</html>
